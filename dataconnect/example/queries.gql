mutation CreateUser {
  user_insert(data: {id: "550e8400-e29b-41d4-a716-446655440000", name: "bobuser"}) @auth(level: USER)
}

query GetPosts @auth(level: PUBLIC) {
  posts {
    id
    title
    content
  }
}

mutation UpdatePost($id: UUID!, $text: String) @auth(level: USER) {
  post: post_update(key: {id: $id}, data: {
    text: $text,
    updatedAt_expr: "request.time"
  })
}

query MyPosts @auth(level: USER) {
  posts(where: {userUid: {eq_expr: "auth.uid"}}) {
    content, tags, createdAt
  }
}